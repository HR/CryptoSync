<html>

<head>
	<meta charset="utf-8">
	<title>The Vault</title>
	<link rel="stylesheet" href="style/vault.css" charset="utf-8">
	<!-- <script language="javascript" type="text/javascript" src="js/handle.js"></script> -->
</head>

<body>
	<section id="vault">
		<header class="top">
			<img src="images/icons/CryptoSyncVault.svg" class="icon centre" alt="">
			<a class="right">
				<img src="images/icons/folder.svg" class="icon" alt="" />
			</a>
			<a class="left">
				<img src="images/icons/settings.svg" class="icon" alt="" />
			</a>
		</header>
		<div class="main">
			<div class="segment" id="accounts">
				<div class="table" id="accountsList">
				</div>
			</div>
			<div class="segment" id="files">
				<input type="text" placeholder="    Search files" />
				<div class="table">
					<header>
						<h4>Home</h4>
					</header>
					<div class="row selected">
						<div class="name">InnovationBlue....psd</div>
						<div class="lastMod">2 days ago.</div>
					</div>
					<div class="row">
						<div class="name">Secret_selfie.jpeg</div>
						<div class="lastMod">2 days ago.</div>
					</div>
					<div class="row">
						<div class="name">EM_induction.pdf</div>
						<div class="lastMod">2 days ago.</div>
					</div>
					<div class="row">
						<div class="name">ACvsDC_lecture....pdf</div>
						<div class="lastMod">3 days ago.</div>
					</div>
					<header>
						<h4>Home/png</h4>
					</header>
					<div class="row">
						<div class="name">tesla.psd</div>
						<div class="lastMod">3 days ago.</div>
					</div>
					<div class="row">
						<div class="name">random.psd</div>
						<div class="lastMod">4 days ago.</div>
					</div>
					<div class="row">
						<div class="name">true.png</div>
						<div class="lastMod">5 days ago.</div>
					</div>
					<div class="row">
						<div class="name">true.png</div>
						<div class="lastMod">5 days ago.</div>
					</div>
					<div class="row">
						<div class="name">true.png</div>
						<div class="lastMod">5 days ago.</div>
					</div>
					<div class="row">
						<div class="name">true.png</div>
						<div class="lastMod">5 days ago.</div>
					</div>
				</div>
			</div>
			<div class="segment" id="info">
				<div id="content">
					<h3>InnovationBlueprint.psd</h3>
					<table>
						<tr>
							<td>Creation date</td>
							<td>12 may 2015</td>
						</tr>
						<tr>
							<td>Last Modified</td>
							<td>12 may 2015</td>
						</tr>
						<tr>
							<td>Checksum</td>
							<td>
								<input type="text" value="n9987Nh87hHBVJjv4frtrx389n898n98y" />
								<a data-action="clip">
									<img src="images/icons/clippy.svg" alt="" />
								</a>
							</td>
						</tr>
						<tr>
							<td>Shares</td>
							<td>
								<input type="text" value="n9987Nh87hHBVJjv4frtrx389n898n98y" />
								<a data-action="clip">
									<img src="images/icons/clippy.svg" alt="" />
								</a>
								<input type="text" value="n9987Nh87hHBVJjv4frtrx389n898n98y" />
								<a data-action="clip">
									<img src="images/icons/clippy.svg" alt="" />
								</a>
								<input type="text" value="n9987Nh87hHBVJjv4frtrx389n898n98y" />
								<a data-action="clip">
									<img src="images/icons/clippy.svg" alt="" />
								</a>
							</td>
						</tr>
						<tr>
							<td class="bttline">Encryption key</td>
							<td>
								<button class="default">Reconstruct</button>
							</td>
						</tr>
					</table>
				</div>
				<footer>
					<a class="right">
						<img src="images/icons/trashcan.svg" alt="" />
					</a>
				</footer>
			</div>
		</div>
	</section>
	<script id="account-template" type="text/x-handlebars-template">
		<div class="row">
			<div class="type">
				<div class="profile" style="background:
    url(data:image/gif;base64,{{profileImg}})
    no-repeat
    center center;"></div>
				<div class="cloudType">
					<img src="images/icons/{{type}}.svg"></img>
				</div>
			</div>
			<div class="content">
				<div class="name">{{name}}</div>
				<div class="email">{{email}}</div>
			</div>
		</div>
	</script>
	<script id="file-template" type="text/x-handlebars-template">
		<div class="row">
			<div class="name">{{name}}</div>
			<div class="lastMod">{{lastMod}}</div>
		</div>
	</script>
	<script type="text/javascript">
		window.$ = window.jQuery = require('jquery');
		// load core modules first
		var remote = require('electron').remote,
			ipcRenderer = require('electron').ipcRenderer,
			accounts = remote.getGlobal("accounts"),
			Handlebars = require('handlebars'),
			mdb = remote.getGlobal("mdb"),
			rconsole = remote.getGlobal("console"),
			remoteWin = remote.getCurrentWindow(),
			webContents = remoteWin.webContents;

		$(window).on('online', updateOnlineStatus);
		$(window).on('offline', updateOnlineStatus);
		updateOnlineStatus();

		$(window).load(function() {
			/* Render accounts */
			for (var account in accounts) {
				if (accounts.hasOwnProperty(account)) {
 					var template = Handlebars.compile($("#account-template").html());
					var account = template(accounts[account]);
					$('#accountsList').append(account);
					$('#accountsList').find('.row').first().addClass( "selected" );
				}
			}
		});

		/* Helper functions */
		// Network change event
		function updateOnlineStatus() {
			ipcRenderer.send('online-status-changed', navigator.onLine ? 'online' : 'offline');
		};
	</script>
</body>

</html>
